<!doctype html>
<!--<html><head><script type="text/javascript" src="js/main.js"></script><style></style></head><body></body></html>-->
<html class="">
<head>
    <meta charset="utf-8">
    <title>dpl</title>
    <meta name="keywords" content="一起作业,一起作业网,17作业网,一起作业网英语,一起作业学生端,一起作业教师端,家长通,在线教育平台,学生APP">
    <meta name="description" content="一起作业是一款免费学习工具，是一个学生、老师和家长三方互动的作业平台，老师轻松布置作业，学生快乐做作业，家长可以定期查看孩子的学习进度及报告，情景交融的学习模式，让孩子轻松搞定各科学习！一起作业，让学习成为美好体验。">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<script src='__TMPL__/index/js/jquery-1.7.1.min-v20160711111809.js' type='text/javascript' charset='utf-8'></script>
    <script src=__TMPL__/index/js/jquery-utils-v20160711111810.js' type='text/javascript' charset='utf-8'></script>
    <script src='__TMPL__/index/js/$17.min-v20180809224016.js' type='text/javascript' charset='utf-8'></script>
<link href='__TMPL__/index/css/jquery-impromptu-v20160711111810.css' rel='stylesheet' type='text/css' charset='utf-8' />
    <link href='__TMPL__/index/css/pc-home.min-v20180904173827.css' rel='stylesheet' type='text/css' charset='utf-8' />
<script src='__TMPL__/index/js/template.min-v20160711111810.js' type='text/javascript' charset='utf-8'></script>
    <script src='__TMPL__/index/js/jquery.flexslider-min-v20160711111809.js' type='text/javascript' charset='utf-8'></script>
    <script src='__TMPL__/index/js/jquery-impromptu.min-v20160711111810.js' type='text/javascript' charset='utf-8'></script> <!--[if IE 6]>
<script src='__TMPL__/index/js/dd_belatedpng-v20160711111809.js' type='text/javascript' charset='utf-8'></script>
<script type="text/javascript">$(function(){ if(typeof DD_belatedPNG === "object"){DD_belatedPNG.fix('*');} });</script>
<![endif]--><script type="text/javascript">
setTimeout(function(){
    var w=window,d=document;
    if(w.jQuery==undefined){
        var idx=-1,keys=["cnc","bsy","ali","skip"];
        if(!keys.length){alert('CDN配置错误，请联系客服或技术');return;}
        for(var i=0;i<keys.length;i++){if(keys[i] == 'cnc'){idx=i;break;}}
        var nct = keys[(idx + 1) % keys.length], t = new Date();
        t.setTime(t.getTime() + (nct == 'skip' ? 7200 * 1000 : 86400 * 14 * 1000));
        d.cookie = "cdntype=" + nct + ";path=/;expires=" + t.toGMTString();
        setTimeout(function () { w.top.location.href='/?_set_cdntype=' + nct; }, 500);
    }
}, 20 * 1000);
</script>
    <script type="text/javascript">
        (function(){
            if(getQueryString('ref') != "back"){
                var browser = {
                    versions: function(){
                        var u = navigator.userAgent;
                        var isMobile = {//移动终端浏览器版本信息
                            mobile : !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
                            android: u.indexOf('Android') > -1, //android终端或者uc浏览器
                            isIOS : u.indexOf('iPhone') > -1 //是否为iPhone或者iPad
                        };

                        //移动端访问页面
                        if(isMobile.android || (isMobile.isIOS && isMobile.mobile)){
                            location.href = "https://www.17zuoye.com/project/mobilegoin/index.vpage";
                        }
                    }()
                };
            }

            function getQueryString(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
                var r = window.location.search.substr(1).match(reg);
                if (r != null) return unescape(r[2]); return null;
            }
        }());
    </script>
<script type="text/javascript">
    window._17zuoye = window._17zuoye || {};
    window._17zuoye.pathPattern = '/login.vpage';
    window._17zuoye.realRemoteAddr = '49.80.172.135';
</script>
</head>
<body class="">
<div class="zy-header JS-indexPageBox">
    <div class="zy-inner">
        <div class="zy-nav">
            <a href="{:url('Login/index')}" class="logo"></a>
            <div class="navList">
                <a href="{:url('Login/index')}" class="menu active" title="首页">首页</a>
                <a href="{:url('Login/indexs')}" class="menu" title="产品概念">产品概念</a>
                <a href="{:url('Login/guan')}" class="menu" title="关于我们">关于我们</a>
                <a href="{:url('Login/wmen')}" class="menu" title="加入我们">加入我们</a>
            </div>
        </div>
        <div class="rightIn">
        </div>
    </div>
</div>

<div class="zy-homeContainer JS-indexPageBox" style="height: 100%;">
    <div class="JS-indexSwitch-main">
        <ul class="zy-homeBox slides">
            <li class="homeItem homeItem01" style="width: 100%">
                <div class="innerBox">
                    <div class="info">
                        <div class="title01" style="font-size: 54px">让学习成为美好体验</div>
                        <div class="loginBtn clearfix">
                            <div class="zy-header" style="position: static; display: inline-block; width: auto; float: right; padding-left: 20px;">
                                <div class="rightIn" style="display: inline-block; float: none; margin: 0;padding: 0;">
                                    <a href="https://www.17zuoye.com/help/downloadApp.vpage?refrerer=pc" target="_blank" class="load" style="padding: 0; border: none; float: none; width: auto; font-size: 16px; color: #000;"><i class="phone-icon"></i>APP下载</a>
                                </div>
                            </div>
                                <a href="javascript:;" class="JS-register-main">注册</a>
                            <a href="javascript:;" class="active JS-login-main">登录</a>
                        </div>
                    </div>
                </div>
            </li>
            <li class="homeItem homeItem02">
                <div class="innerBox">
                    <div class="info">
                        <div class="title01" style="font-size: 54px">让学习成为美好体验</div>
                        <div class="loginBtn clearfix">
                            <div class="zy-header" style="position: static; display: inline-block; width: auto; float: right; padding-left: 20px;">
                                <div class="rightIn" style="display: inline-block; float: none; margin: 0;padding: 0;">
                                    <a href="" target="" class="load" style="padding: 0; border: none; float: none; width: auto; font-size: 16px; color: #000;"><i class="phone-icon"></i>APP下载</a>
                                </div>
                            </div>
                            <a href="javascript:;" class="JS-register-main">注册</a>
                            <a href="javascript:;" class="active JS-login-main">登录</a>
                        </div>
                    </div>
                </div>
            </li>

        </ul>
    </div>
    <ul class="zy-scrollNav JS-indexSwitch-mode">
            <li style="left: -16px;"><a>1</a></li>
            <li style="right: -16px;"><a>2</a></li>
    </ul>
</div>

<div id="RenderMain" class="JS-indexPageBox"></div>

<script type="text/html" id="T:LoginTemplateMain">
        <div class="loginPop-box loginBg">
        <div class="loginPop-close JS-clear-btn"></div>
        <div class="lop-inner">
            <div class="loginPop-logo"></div>
            <h1>登录</h1>
                <form id="FormSubmitInit" class="JS-formSubmit" method="post" action="/j_spring_security_check">
                    <input name="returnURL" type="hidden" value='/sso/ticket.vpage?data=%7B%22sign%22%3A%22e939649ab215e841fadaedecc3cffa36%22%2C%22appKey%22%3A%2217Platform%22%2C%22timestamp%22%3A%221540862673810%22%2C%22target%22%3A%22http%3A%2F%2Fwww.17zuoye.com%2Fssojump.vpage%3FreturnURL%3Dhttp%253A%252F%252Fwww.17zuoye.com%22%7D'>
                    <div class="lop-content">
                        <div class="c-text">
                            <span class="login-icon icon-5"></span>
                            <input type="text" value="" name="j_username" tabIndex="1"
                                   class="JS-inputEvent" id="index_login_username" placeholder="手机号/学号"/>
                            <div class="errorTips">请输入学号/手机号</div>
                        </div>
                        <div class="c-text">
                            <span class="login-icon icon-4"></span>
                            <input type="password" id="index_login_password" name="j_password" class="JS-inputEvent"
                                   tabIndex="2" placeholder="输入密码"/>
                            <span class="pwd-icon icon-8 JS-pwd"></span>
                            <div class="errorTips"></div>
                        </div>
                        <div class="c-text">
                            <a href="javascript:void(0);" class="info active JS-rememberMe-btn">
                                <input name="_spring_security_remember_me" value="on" type="checkbox" checked="checked"
                                       style="display: none;"/>
                                <span class="login-icon icon-6"></span>记住我
                            </a>
                            <a href="/ucenter/resetnavigation.vpage?ref=fixed" target="_blank" class="info">忘记密码</a><span
                                class="line"> | </span><a href="javascript:void(0);" class="info JS-register-main">立即注册</a>
                        </div>
                    </div>
                    <div class="loginPop-footer">
                        <input type="submit" value="登录" class="login-btn" id="_a_loginForm" name="_a_loginForm" tabIndex="3"/>
                    </div>
                </form>
        </div>
    </div>
</script><div id="forgetInfoPopup"></div>
<script type="text/javascript">
    $(function(){
        var forgetInfoPopup = $("#forgetInfoPopup");
        var _tempToken = "";
        var _tempMobile = "";
        var _tempStep = 1;
        var $currentUserId = $17.getCookieWithDefault('voxlastname');

        if( $17.getHashQuery("error") &&  $17.getHashQuery("type")){
            _tempMobile = $17.getHashQuery("mobile");
            _tempToken = $17.getHashQuery("captchaToken");

            $17.hashCallback(["error", "type"], function(obj){
                $(".JS-login-main").trigger('click');

                switch (obj.type){
                    case "mobile" :
                        forgetInfoPopup.html( template("T:忘记密码提示", {mobile : _tempMobile}) );

                        setTimeout(function(){
                            forgetInfoPopup.find("[name='mobile']").focus();
                            refreshCaptcha(_tempToken);
                        }, 200);

                        $17.voxLog({
                            userId : $currentUserId,
                            module : "loginInfoError",
                            op : "load-popup-mobile",
                            step : _tempStep
                        });
                        break;
                    case "wechat" :
                        forgetInfoPopup.html( template("T:有绑定二维码", {}) );
                        $17.voxLog({
                            userId : $currentUserId,
                            module : "login-NewForgotPassword",
                            op : "load-popup-WeChat",
                            step : _tempStep
                        });
                        break;
                    case "junior" :
                        forgetInfoPopup.html( template("T:初中学号提示", {}) );
                        $17.voxLog({
                            userId : $currentUserId,
                            module : "loginInfoError",
                            op : "load-popup-junior",
                            step : _tempStep
                        });
                        break;
                    case "studentForbidden" :
                        $17.voxLog({
                            userId : $currentUserId,
                            module : "loginInfoError",
                            op : "studentForbidden"
                        }, 'student');
                        baseErrorForgot('<p style="margin-top: -10px;">账号异常暂时无法登录，若有疑问请联系客服 400-160-1717</p>');
                        break;
                    case "forbidden" :
                        baseErrorForgot('<p style="margin-top: -10px;">账号异常暂时无法登录，若有疑问请联系客服 400-160-1717</p>');
                        break;
                    case "infant" :
                        $17.voxLog({
                            userId : $currentUserId,
                            module : "loginInfoError",
                            op : "infant"
                        }, 'student');
                        baseErrorForgot('<p style="margin-top: -10px;">学前阶段用户请使用APP登录哦！</p>');
                        break;
                }
            });
        }else{
            $17.hashCallback(["error"], function(obj){
                $(".JS-login-main").trigger('click');
                baseErrorForgot('<p style="margin-top: -10px;">登录失败！<br/><a href="/ucenter/resetnavigation.vpage?ref=popup" target="_blank" class="info">忘记学号/密码了？</a></p>');

                $17.voxLog({
                    userId : $currentUserId,
                    module : "login-OldForgotPassword",
                    op : "load-popup-old",
                    step : _tempStep
                });

                if( $17.getHashQuery("record") == "true" ){
                    //七天内登录过的记录日志
                    $17.voxLog({
                        userId : $currentUserId,
                        module : "login-NewForgotPassword",
                        op : "sevenDays-login"
                    });
                }
            });
        }

        //第一步找回密码 submit
        var _returnToken = "";
        $(document).on("click", ".v-forgotPassword-1", function(){
            var $this = $(this);
            var $forgotModule = $("[data-forgot-type='1']");
            var $mobile = $forgotModule.find("input[name='mobile']").val();
            var $code = $forgotModule.find("input[name='code']").val();
            var success = validateForget("[data-forgot-type='1']");

            if(!success){
                return false;
            }

            $.post("/ucenter/mrpwds1.vpage", {
                mobile : $mobile,
                captchaToken : _tempToken,
                captchaCode : $code
            }, function(data){
                if(data.success){
                    _tempMobile = $mobile;
                    _returnToken = data.token;
                    if(data.needUserType){
                        stepHasShow(1, 2);
                        _tempStep = 2;
                    }else{
                        stepHasShow(1, 3);
                        _tempStep = 3;
                        getSMSVerifyCode($(".v-forgotResendCode"), data, data.timer);
                    }

                }else{
                    refreshCaptcha(_tempToken);
                    $17.alert(data.info);
                }
            });

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-step1-submit",
                step : _tempStep
            });
        });

        //第二步找回密码 submit
        $(document).on("click", ".v-forgotPassword-2", function(){
            var $this = $(this);
            var $userType = $this.attr("data-type");

            if( $17.isBlank($userType) ){
                return false;
            }

            $.post("/ucenter/mrpwds2.vpage", {
                token : _returnToken,
                userType : $userType
            }, function(data){
                if(data.success){
                    stepHasShow(2, 3);
                    _tempStep = 3;
                    getSMSVerifyCode($(".v-forgotResendCode"), data, data.timer);
                }else{
                    $17.alert(data.info);
                }
            });

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-step2-selectCharacter",
                step : _tempStep
            });
        });

        //第三步找回密码 submit
        $(document).on("click", ".v-forgotPassword-3", function(){
            var $this = $(this);
            var $forgotModule = $("[data-forgot-type='3']");
            var $verCode = $forgotModule.find("input[name='ver_code']").val();
            var success = validateForget("[data-forgot-type='3']");

            if(!success){
                return false;
            }

            $.post("/ucenter/mrpwds3.vpage", {
                token : _returnToken,
                code : $verCode
            }, function(data){
                if(data.success){
                    stepHasShow(3, 4);
                    _tempStep = 4;
                }else{
                    $17.alert(data.info);
                }
            });

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-step3-nextSubmit",
                step : _tempStep
            });
        });

        //第四步找回密码 submit
        $(document).on("click", ".v-forgotPassword-4", function(){
            var $this = $(this);
            var $forgotModule = $("[data-forgot-type='4']");
            var $password = $forgotModule.find("input[name='password']").val();
            var $verifyPassword = $forgotModule.find("input[name='verify_password']").val();
            var success = validateForget("[data-forgot-type='4']");

            if(!success){
                return false;
            }

            if($password != $verifyPassword){
                $forgotModule.find("input[name='verify_password']").parent().addClass('error');
                $forgotModule.find("input[name='verify_password']").siblings(".errorTips").text( '密码不一致' );
                return false;
            }

            $.post("/ucenter/mrpwds4.vpage", {
                token : _returnToken,
                password : $verifyPassword
            }, function(data){
                if(data.success){
                    stepHasShow(4, 5);
                    _tempStep = 5;

                    $17.voxLog({
                        userId : $currentUserId,
                        module : "login-NewForgotPassword",
                        op : "click-step4-setSuccess",
                        step : _tempStep
                    });
                }else{
                    $17.alert(data.info);
                }
            });

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-step4-setNewPass",
                step : _tempStep
            });
        });

        //重新发送验证码
        $(document).on("click", ".v-forgotResendCode", function(){
            var $this = $(this);
            if($this.hasClass("btn_disable")){
                return false;
            }

            $.post("/ucenter/svc.vpage", {
                token : _returnToken
            }, function(data){
                if(data.success){
                    getSMSVerifyCode($(".v-forgotResendCode"), data, data.timer);
                }else{
                    $17.alert(data.info);
                }
            });

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-sendCode",
                step : _tempStep
            });
        });

        //下一步显示
        function stepHasShow(current, next){
            $("[data-forgot-type='"+current+"']").hide();
            $("[data-forgot-type='"+next+"']").show();
            $(".JS-verMobileShow").html(_tempMobile);
        }

        //基础错误提示
        function baseErrorForgot(val){
            var errorInfoIdx =  $("#index_login_password");

            errorInfoIdx.parent().addClass('error');
            errorInfoIdx.siblings(".errorTips").html(val);
            setTimeout(function(){
                errorInfoIdx.parent().removeClass('error');
                errorInfoIdx.siblings(".errorTips").html("");
            }, 4000);

            $("#index_login_username, #index_login_password").on("keydown", function(){
                errorInfoIdx.parent().removeClass('error');
                errorInfoIdx.siblings(".errorTips").html("");
            });
        }

        //关闭忘记密码提示
        $(document).on("click", ".v-closeForgetInfo", function(){
            $("#forgetInfoPopup").empty();

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-closePopup",
                step : _tempStep
            });
        });

        $(document).on("click", "#captchaImage", function(){
            refreshCaptcha(_tempToken);

            $17.voxLog({
                userId : $currentUserId,
                module : "login-NewForgotPassword",
                op : "click-getCode-4digit"
            });
        });

        //获取验证码
        function refreshCaptcha(token) {
            $('#captchaImage').attr('src', "/captcha?" + $.param({
                'module': 'resetpwd',
                'token': token,
                't': new Date().getTime()
            }));
        }

        //获取短信验证码
        function getSMSVerifyCode($this, data, second){
            var timerCount;
            var timer;
            second = second ? second : 60;

            if(data.success){
                timerCount = second;
            }else{
                timerCount = data.timer || null;
                if(timerCount == null){
                    return false;
                }
            }

            $this.addClass("dis").html(timerCount + "s后重发");

            timer = $.timer(function(){
                if(timerCount <= 0){
                    $this.removeClass("dis").html("重新发送");
                    timerCount = second;
                    timer.stop();
                }else{
                    $this.addClass("dis").html(--timerCount + "s后重发");
                }
            });
            timer.set({ time: 1000});
            timer.play();
        }

        function validateForget(typeBox){
            $(typeBox).find(".require").each(function(){
                var $self = $(this);
                if($17.isBlank($self.val())){
                    $self.parent().addClass('error');
                    $self.siblings(".errorTips").text( $self.data("label") + '不可为空' );
                }else{
                    $self.parent().removeClass('error');
                    $self.siblings(".errorTips").text('');
                }
            });

            return ($(typeBox).find(".error").size() < 1) ? true : false;
        }
    });
</script>

<script type="text/html" id="T:初中学号提示">
    <div class="loginPop-box">
        <div class="lop-inner">
            <div class="loginPop-close v-closeForgetInfo"></div>
            <h1>暂不支持中学学生电脑端登录，请下载APP用手机登录</h1>
            <div class="lop-main">
                <div class="c-text" style="text-align: center;">
                    <img src="__TMPL__/public/assets/simpleboot3/index/picture/koudaixueshe_code.png" alt="" width="180"/>
                    <p>扫描二维码</p>
                    <p>下载一起作业学生端</p>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="T:有绑定二维码">
    <div class="loginPop-box">
        <div class="lop-inner">
            <div class="loginPop-close v-closeForgetInfo"></div>
            <h1>登录失败，在家长通中重置密码</h1>
            <div class="lop-main">
                <div class="c-text">
                    <p>1、打开家长通APP<img src="picture/par-icon.png" class="pic"></p>
                    <p>2、点击个人中心-重置孩子密码</p>
                    <img src="picture/login-image.png" class="pic">
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="T:忘记密码提示">
    <div class="loginPop-box">
        <div class="lop-inner">
            <div class="loginPop-close v-closeForgetInfo"></div>
            <div data-forgot-type="1">
                <h1>登录失败，找回密码？</h1>
                <div class="lop-content">
                    <div class="tips">提醒：手机号<span><%=mobile%></span>可作为账号登录哦！</div>
                    <div class="c-text">
                        <span class="login-icon icon-1"></span>
                        <input type="text" placeholder="填写手机号码" maxlength="11" name="mobile" class="require txt1 JS-inputEvent" data-label="手机号">
                        <div class="errorTips"></div>
                    </div>
                    <div class="c-text">
                        <span class="login-icon icon-2"></span>
                        <input type="text" placeholder="填写右侧数字验证码" name="code" data-label="验证码" maxlength="4" class="require txt2 JS-inputEvent">
                        <img id='captchaImage' height="34" style="padding: 0; height: 38px; cursor: pointer;" class="code"/>
                        <div class="errorTips"></div>
                    </div>
                    <div class="loginPop-footer">
                        <a class="login-btn v-forgotPassword-1" href="javascript:void (0);">下一步</a>
                    </div>
                </div>
            </div>

            <div style="display: none;" data-forgot-type="2">
                <h1>登录失败，找回密码？</h1>
                <div class="lop-content">
                    <div class="tips">请选择你的身份</div>
                    <div class="lop-tab">
                        <ul>
                            <li class="v-forgotPassword-2" data-type="1">
                                <div class="image image-tea"></div>
                                <div class="side">我是老师</div>
                            </li>
                            <li class="v-forgotPassword-2" data-type="3" >
                                <div class="image"></div>
                                <div class="side">我是学生</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div style="display: none;" data-forgot-type="3">
                <h1>登录失败，找回密码？</h1>
                <div class="lop-content">
                    <div class="tips">请输入<span class="JS-verMobileShow"><%=mobile%></span>收到的短信验证码</div>
                    <div class="c-text">
                        <span class="login-icon icon-3"></span>
                        <input type="text" placeholder="手机收到的验证码" value="" maxlength="6" class="require txt2 JS-inputEvent" name="ver_code" data-label="验证码">
                        <span class="code codeBg v-forgotResendCode" style="cursor: pointer;">重新发送</span>
                        <div class="errorTips"></div>
                    </div>
                    <div class="loginPop-footer">
                        <a href="javascript:void(0);" class="login-btn v-forgotPassword-3">下一步</a>
                    </div>
                </div>
            </div>

            <!--验证通过 step4 mobile-->
            <div style="display: none;" data-forgot-type="4">
                <h1>验证通过</h1>
                <div class="lop-content">
                    <div class="tips">请为账号<span class="JS-verMobileShow"><%=mobile%></span>重新设置密码</div>
                    <div class="c-text">
                        <span class="login-icon icon-4"></span>
                        <input type="password" value="" maxlength="16" name="password" data-label="密码" class="txt1 require JS-inputEvent" placeholder="请输入新密码">
                        <div class="errorTips"></div>
                    </div>
                    <div class="c-text">
                        <span class="login-icon icon-4"></span>
                        <input type="password" value="" maxlength="16" name="verify_password" data-label="确认密码" class="txt1 require JS-inputEvent" placeholder="请再次输入新密码">
                        <div class="errorTips"></div>
                    </div>
                    <div class="loginPop-footer">
                        <a href="javascript:void(0);" class="login-btn v-forgotPassword-4">下一步</a>
                    </div>
                </div>
            </div>

            <!--重置成功 登录 step4 mobile -->
            <div style="display: none;" data-forgot-type="5">
                <h2>重置成功，马上用新密码登录！</h2>
                <div class="loginPop-footer">
                    <a href="javascript:void(0);" class="login-btn v-closeForgetInfo">确定</a>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/javascript">
    var contextId = 'clTG6M06At';
    var captchaToken = 'akfiSLWjHhGqOBfLIa4BJrf3';
    var fromShensz = 'false';
    var studentForm = {
        webSource : "classCode",
        classCode : "",              //设置班级编号
        classCodeName : "",          //设置班级名称
        mobileGray : "",          //设置手机号
        teacherId : "",
        gender : ""
    };

    var teacherForm = {
        webSource: "",
        mobile : 0,
        code : 0
    };
    // 来源为神算子，修改webSource（register_next.ftl注册接口时传给后端）
    if (fromShensz === 'true') {
        studentForm.webSource = 'Shensz';
        teacherForm.webSource = 'Shensz';
    }
</script>
<script type="text/html" id="T:RegisterSelectMain">
    <div class="loginPop-box loginBg">
        <div class="loginPop-close JS-clear-btn"></div>
        <div class="lop-inner">
            <div class="loginPop-logo"></div>
            <h1>请选择你的身份</h1>
            <div class="lop-content">
                <div class="clearfix"></div>
                <div class="lop-tab">
                    <ul>
                        <li class="JS-selectStudent-main yes">
                            <div class="image"></div>
                            <div class="side">我是学生</div>
                        </li>
                        <li class="JS-selectTeacher-main yes">
                            <div class="image image-tea"></div>
                            <div class="side">我是老师</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="T:RegisterStudentMain">
    <div class="loginPop-box loginBg">
        <div class="loginPop-close JS-clear-btn"></div>
        <div class="lop-inner">
            <div class="loginPop-logo"></div>
            <h1>注册学生账号</h1>
            <div class="lop-content contentMar">
                <div class="lop-right">
                    <div class="c-text">
                        <span class="login-icon icon-1"></span>
                        <input type="text" placeholder="请输入老师手机号或ID号" class="txt1 JS-inputEvent JS-classInput" maxlength="11"/>
                        <div class="errorTips">老师账号错误</div>
                    </div>
                    <div class="" style="padding-left: 100px;">
                        <a href="javascript:void(0);" class="login-btn login-orange JS-getClassLIst">注册学生账号</a>
                        <a href="javascript:void(0);" class="info-btn JS-registerQuestion-stu" style="font-size: 14px;">注册遇到问题？</a>
                    </div>
                    <div class="agreement_main">
                        <i class="active JS-agreement"></i>
                        <span>注册即代表同意<a href="https://www.17zuoye.com/help/serviceagreement.vpage?agreement=0" target="_blank">《一起教育科技学生端用户服务协议》</a></span>
                    </div>
                </div>
                <div class="lop-tab tabLeft">
                    <ul>
                        <li class="JS-selectStudent-main stu active">
                            <div class="image"></div>
                            <div class="side">我是学生</div>
                        </li>
                        <li class="JS-selectTeacher-main">
                            <div class="image image-tea"></div>
                            <div class="side">我是老师</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="T:RegisterTeacherMain">
    <div class="loginPop-box loginBg">
        <div class="loginPop-close JS-clear-btn"></div>
        <div class="lop-inner">
            <div class="loginPop-logo"></div>
            <h1>注册老师账号</h1>
            <div class="lop-content">
                <div class="clearfix"></div>
                <div class="JS-defaultMode">
                    <div class="c-text">
                        <span class="login-icon icon-1"></span>
                        <input type="text" placeholder="请输入您的手机号" class="txt1 JS-teacherMobile JS-inputEvent" maxlength="11" />
                        <div class="errorTips"></div>
                    </div>
                    <div class="c-text">
                        <span class="login-icon icon-2"></span>
                        <input type="text" placeholder="请输入右侧数字" class="txt2 JS-teacherCaptcha JS-inputEvent" maxlength="4" id="captchaInputLogin" />
                        <img onclick="refreshCaptcha();" id='captchaImageLogin' class="code" style="padding: 0; height: 38px; cursor: pointer;"/>
                        <div class="errorTips"></div>
                    </div>
                    <div class="c-text">
                        <span class="login-icon icon-3"></span>
                        <input type="text" placeholder="请输入短信验证码" class="txt2 JS-teacherSmsCode JS-inputEvent" maxlength="6" />
                        <span class="code codeBg login-blue JS-getCheckCode" style="cursor: pointer;">获取验证码</span>
                        <div class="errorTips"></div>
                    </div>
                    <div class="c-text-left"><a href="javascript:void(0);" class="info-btn JS-receiveNotCode" style="font-size: 14px;">获取语音验证码</a> | <a href="javascript:void(0);" class="info-btn JS-registerQuestion-tea" style="font-size: 14px;">短信验证码遇到问题？</a></div>
                    <a href="javascript:void(0);" class="login-btn login-blue JS-teacherVerMobile">注册老师账号</a>
                    <div class="agreement_main">
                        <i class="active teacher_icon JST-agreement"></i>
                        <span>注册即代表同意<a href="https://www.17zuoye.com/help/serviceagreement.vpage?agreement=1" target="_blank">《一起教育科技老师端用户服务协议》</a></span>
                    </div>
                </div>
                <div class="JS-voiceMode" style="display: none;">
                    <div class="lop-right">
                        <div class="sub">免费获取语音验证码</div>
                        <div class="con">一起作业将给你拨打电话，通过语音播报验证码，请注意接听来电。</div>
                    </div>
                    <a href="javascript:void(0);" class="login-btn return-btn login-small-btn JS-receiveNotCode" data-type="black">返回</a>
                    <a href="javascript:void(0);" class="login-btn login-blue login-small-btn JS-getCheckCode" data-type="voice">获取验证码</a>
                </div>
                <div class="lop-tab tabLeft">
                    <ul>
                        <li class="JS-selectStudent-main">
                            <div class="image"></div>
                            <div class="side">我是学生</div>
                        </li>
                        <li class="JS-selectTeacher-main tea active">
                            <div class="image image-tea"></div>
                            <div class="side">我是老师</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="T:学生注册帮助">
    <div class="main-box student-banding-box-2" style="padding: 0 10px 10px 10px; text-align: left;line-height: 24px;">
        <p style="margin-bottom: 10px">（1）学生注册：学生注册账号需要使用老师告知的号码，登录一起作业网站或者手机APP点击注册新账号，按照提示进行注册哦！如果老师未注册一起作业学生是无法使用的。</p>
        <p style="margin-bottom: 10px">（2）老师号码：老师号码是您自己的老师在注册一起作业账号后，系统生成的老师账号或者绑定账号的手机号码。</p>
        <p style="margin-bottom: 10px">（3）怎样获取老师号码：需要咨询您的老师是否注册，然后使用老师告知的号码进行注册账号哦。</p>
    </div>
</script>
<script type="text/html" id="T:老师注册帮助">
    <div class="main-box student-banding-box-2" style="padding: 0 10px 10px 10px; text-align: left;line-height: 24px;">
        <p style="margin-bottom: 10px">（1）验证码收不到：验证码是以短信的形式发送到您的手机上的，如果没有收到验证码建议查看是否开启了短信拦截，或者建议您隔一段时间后重新点击获取，如果还是无法收到，可以拨打400-160-1717进行咨询。</p>
        <p style="margin-bottom: 10px">（2）验证码获取上限：由于您今天获取验证码次数已达到上限，建议您换个手机号重新获取验证码、或者明天再进行获取验证码操作。</p>
    </div>
</script>
<script>
    $(document).on("click", ".JS-registerQuestion-stu", function(){
        $.prompt(template("T:学生注册帮助",{}),{
            title:"学生注册帮助",
            buttons:{},
        });
    });

    $(document).on("click", ".JS-registerQuestion-tea", function(){
        $.prompt(template("T:老师注册帮助",{}),{
            title:"老师注册帮助",
            buttons:{},
        });
    });
</script><div class="js-scrollMainIdBox" id="register_template" style="display: none; min-height: 100%">
    <div class="zy-header">
        <div class="zy-nav">
            <a href="/" class="logo"></a>
        </div>
        <div class="rightIn">
            <a href="javascript:void(0)" class="inBtn referBtn active" onclick="window.open('https://www.17zuoye.com/redirector/onlinecs_new.vpage?type=student&question_type=question_account_ps&origin=PC-注册','','width=856,height=519');" data-tongji="学生-在线咨询">在线咨询</a>
            <span class="referTime">咨询时间<br>8:00-21:00</span>
        </div>
    </div>
    <div class="pr-main pr-main-child js-registerTemplateType" data-type="student">
        <div class="hd">请设置你的密码！</div>
        <div class="main-box">
            <div class="main-inner">
                <div id="allSearchClazzItem"></div>
                <ul class="main-list">
                    <li style="background: none;border: none;padding: 0;margin: 0;position: relative;top: -90px;">
                        <input type="text" value="" maxlength="4" name="clazzId" data-label="班级" class="require js-select-clazz-id" style="display: none;"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                    <li style="background: none;border: none;padding: 0;margin: 0;position: relative;top: -20px;">
                        <input type="text" value="" maxlength="4" name="gender" data-label="性别" class="require js-select-gender" style="display: none;"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                </ul>
                <ul class="main-list">
                    <li class="r-username ">
                        <label>请输入真实姓名</label>
                        <input type="text" value="" maxlength="20" name="username" data-label="真实姓名" class="require"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                        <div class="reg-arrowInfo">
                            <p>1.注册后账号将发送给老师；</p>
                            <p>2.姓名填写后不能修改。</p>
                        </div>
                    </li>
                    <li class="r-password ">
                        <label>请设置密码</label>
                        <input type="password" value="" maxlength="16" name="password" data-label="密码"  class="require"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                    <li>
                        <label>请再次输入设置的密码</label>
                        <input type="password" value="" maxlength="16" name="verify_password" data-label="确认密码"  class="require"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                    <li class="" style="display: none;">
                        <label>请输入家长手机号</label>
                        <input type="text" value="" maxlength="11" name="mobile" class="" data-label="手机号"/>
                        <span class="info-text"><a href="javascript:void(0);" class="code-btn" id="studentGetCheckCodeBtn"><span>免费获取验证码</span></a></span>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                        <div class="reg-arrowInfo">
                            <p>1.不绑定手机，你兑换的奖品将不能寄送；</p>
                            <p>2.不绑定手机，密码丢失将不能通过手机号找回！</p>
                        </div>
                    </li>
                    <li style="display: none;">
                        <label>请输入手机收到的短信验证码</label>
                        <input type="text" value=""maxlength="6" class="" name="ver_code" data-label="验证码"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                </ul>
                <div class="submit"><a href="javascript:void(0);" class="v-submit-register" data-type="student">完成注册</a></div>
            </div>
        </div>
    </div>
    <div class="pr-main pr-main-teacher js-registerTemplateType" style="display: none;" data-type="teacher">
        <div class="hd">请设置你的密码！</div>
        <div class="main-box">
            <div class="main-inner">
                <ul class="main-list">
                    <li class="r-username ">
                        <label>请输入真实姓名</label>
                        <input type="text" value="" maxlength="20" class="require" name="username" data-role="teacher" data-label="真实姓名"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                    <li class="r-password ">
                        <label>请设置密码</label>
                        <input type="password" value="" maxlength="16" name="password" class="require" data-label="密码"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                    <li class="last ">
                        <label>请再次输入设置的密码</label>
                        <input type="password" value="" maxlength="16" name="verify_password" data-label="确认密码"  class="require"/>
                        <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    </li>
                    <li class="last r-invite null-bor ">
                        <label>请填写邀请人手机或ID（可不填）</label>
                        <input name="invite" type="text" value="" id="invite_info">
                    </li>
                </ul>
                <div class="submit"><a href="javascript:void(0);" class="v-submit-register" data-type="teacher">下一步</a></div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    //老师注册
    $(function(){
        //第二步完成-提交注册
        $(document).on('click', ".v-submit-register[data-type='teacher']", function () {
            var $this = $(this);
            var regBox = $(".js-registerTemplateType[data-type='teacher']");
            var success = validate(".js-registerTemplateType[data-type='teacher']");
            var realNameId = regBox.find("input[name='username']");
            var passwordId = regBox.find("input[name='password']");
            var inviteInfoId = regBox.find("input[name='invite']");
            var inviteInfoIdVal = inviteInfoId.val();

            $17.voxLog({
                module : "newTeacherRegStep",
                op : "reg-clickOverSubmit",
                app : "teacher"
            });

            if(inviteInfoIdVal == "请填写邀请人手机号或者ID"){
                inviteInfoIdVal = "";
            }

            if( $this.hasClass("dis") ){
                return false;
            }
            if (success) {
                if(realNameId.val().length > 20) {
                    realNameId.parent().addClass("i-error");
                    realNameId.siblings(".i-error-info").find("b").text("请不要使用过长的名称。");
                    return false;
                }

                if(!$17.isBlank(inviteInfoIdVal) && !$17.isNumber(inviteInfoIdVal)){
                    inviteInfoId.parent().addClass("i-error");
                    inviteInfoId.siblings(".i-error-info").find("b").text("邀请人请填写邀请人学号，学号为数字。");
                    return false;
                }

                var $userName = realNameId.val();

                $userName = $userName.replace(/(^\s*)|(\s*$)/g,'');

                var data = {
                    role            : 'ROLE_TEACHER',
                    userType        : 1,
                    mobile          : teacherForm.mobile,
                    code            : teacherForm.code,
                    realname        : $userName,
                    password        : passwordId.val(),
                    registerType    : 0,
                    inviteInfo      : inviteInfoIdVal,
                    dataKey         : "",
                    webSource       : teacherForm.webSource
                };

                $17.tongji("注册2-老师-手机方式提交");
                $this.addClass("dis");
                App.postJSON('/signup/msignup.vpage', data, function (data) {
                    if (data && data.success) {
                        setTimeout(function(){
                            location.href = "/teacher/selectschool.vpage";
                        }, 500);

                        //log
                        if($17.getOperatingSystem() == 'iOS' || $17.getOperatingSystem() == 'Android'){
                            $17.voxLog({
                                module : "newTeacherRegStep",
                                op : "reg-OverPage",
                                app : "teacher",
                                source : "mobile"
                            });
                        }else{
                            $17.voxLog({
                                module : "newTeacherRegStep",
                                op : "reg-OverPage",
                                app : "teacher",
                                source : "web"
                            });
                        }
                    } else {
                        var attrs = data.attributes;
                        if(attrs){
                            $.each(attrs, function (key, value) {
                                var el = $('#' + key);
                                if (el.length > 0) {
                                    el.parent().addClass('err');
                                    el.siblings("span").html("<i></i>" + value);
                                } else {
                                    if (attrs.none) {
                                        $17.alert(attrs.none);
                                    }
                                }
                            });
                        }else{
                            $17.alert(data.info);
                        }
                        $this.removeClass("dis");
                    }
                }, function (data) {
                    $17.alert("网络请求失败，请稍等重试或者联系客服");
                    $this.removeClass("dis");
                });
            }
        });
    });

    //学生注册
    $(function(){
        /*免费获取短信验证码*/
        $(document).on("click", "#studentGetCheckCodeBtn",function(){
            var $this = $(this);
            var mobileId = $(".js-registerTemplateType[data-type='student'] input[name='mobile']");

            if($this.hasClass("btn_disable")){
                return false;
            }

            if( $17.isBlank(mobileId.val()) ){
                $this.closest("li").addClass("i-error").find(".i-error-info b").html("手机号不可为空");
                return false;
            }

            //统计学生获取验证码
            if(studentForm.mobileGray == "showMobileReg2C"){
                $17.voxLog({
                    app : "student",
                    module : "studentRegisterFirstPopup",
                    op : "regGetCodeStudent2C",
                    userId : mobileId.val()
                });
            }

            $.post("/signup/smsignsvc.vpage", {mobile : mobileId.val(), cid: "clTG6M06At"}, function(data){
                $17.getSMSVerifyCode($this, data);
                if(!data.success){
                    $this.closest("li").addClass("i-info-mini").find(".i-error-info b").html(data.info);
                }
            });
        });

        //第二步完成-提交注册
        $(document).on('click', ".v-submit-register[data-type='student']", function () {
            var $this = $(this);
            var success = validate(".js-registerTemplateType[data-type='student']");
            var regBox = $(".js-registerTemplateType[data-type='student']");

            if($this.hasClass("dis") || !success){
                return false;
            }

            $this.removeClass("dis");
            studentRegPost(studentForm.classCode);
            function studentRegPost(classCode){
                var $userName = regBox.find("input[name='username']").val();

                $userName = $.trim($userName);

                //开始注册
                if (success) {
                    var dataJson = {
                        role            : 'ROLE_STUDENT',
                        userType        : 3,
                        realname        : $userName,
                        password        : regBox.find("input[name='verify_password']").val(),
                        childRole       : 'ROLE_STUDENT',
                        clazzId         : classCode,
                        registerType    : 0,
                        mobile          : regBox.find("input[name='mobile']").val(),
                        code            : regBox.find("input[name='ver_code']").val(),
                        inviteInfo      : "",
                        dataKey         : "",
                        webSource       : studentForm.webSource,
                        invitation      : "",
                        teacherId       : studentForm.teacherId,
                        gender          : studentForm.gender,
                        scanNumber      : regBox.find("input[name='scannumber']").val()
                    };

                    $17.tongji("注册2-学生-提交");

                    $this.addClass("dis");
                    App.postJSON('/signup/signup.vpage', dataJson, function (data) {
                        if (data && data.success) {
                            $17.tongji("首页-学生-注册成功");

                            if($17.getCookieWithDefault("stregscs")){
                                $(".js-registerTemplateType[data-type='student']").html( template("T:学生注册完成2", {studentId : data.row }));
                            }
                            else{
                                $(".js-registerTemplateType[data-type='student']").html( template("T:学生注册完成", {studentId : data.row }));
                            }

                            setTimeout(function(){
                                $(document).on("click", ".js-student-downloadUser", function(){
                                    downLoadAccount();
                                });

                                $(document).on("click", ".js-student-downloadUser-popup", function(){
                                    $.prompt(template("T:下载账号信息",{}),{
                                        title:"温馨提示",
                                        buttons:{
                                            "不保存" : false,
                                            "保存至电脑" : true
                                        },
                                        loaded:function(){
                                            $(document).on("click", ".save-2-local", function(){
                                                downLoadAccount();
                                            });
                                        },
                                        submit: function(e, v){
                                            if(v){
                                                downLoadAccount();
                                            }else{
                                                location.href = "https://www.17zuoye.com/student/index.vpage";
                                            }
                                        }
                                    });
                                });

                                var $bandingBox = $('.student-banding-box-2');
                                var $popuBox = $('.null-popupmessage');
                                $bandingBox.hide();

                                //若data.row 尾数为17 && 不为第二次注册
                                if(studentForm.mobileGray != "showMobileReg2C"){
                                    $popuBox.find('div.submit:contains("下载账号，开始一起作业")').hide();
                                    $bandingBox.show();
                                    $bandingBox.find('.sb-step2').hide();
                                    $bandingBox.find('.js-info').hide();

                                    $bandingBox.on("click", ".js-bind-now", function(){
                                        var bindPhoneNo = $bandingBox.find('input[name="mobile"]').val();
                                        getPhoneCode(bindPhoneNo);
                                    });

                                    $bandingBox.on("click", ".js-band-confirm-2", function(){
                                        if(validate($bandingBox)){
                                            var ver_code = $bandingBox.find('input[name="ver_code"]').val();

                                            $.post("/student/nonameverifymobile.vpage", {code : ver_code}, function(data){
                                                if(data.success){
                                                    downLoadAccount();
                                                    $17.voxLog({
                                                        app : "student",
                                                        module : "studentRegisterFirstPopup",
                                                        op : "LastTwoIs17Reg-indexPage"
                                                    });
                                                }else{
                                                    $17.alert(data.info);
                                                }
                                            });
                                        }
                                    });
                                    $bandingBox.on("click", ".js-mobile-timer", function(){
                                        var phoneNo  = $bandingBox.find('.mobile-text').html();
                                        getPhoneCode(phoneNo);
                                    });
                                    $17.voxLog({
                                        app : "student",
                                        module : "studentRegisterFirstPopup",
                                        op : "LastTwoIs17Reg-success"
                                    });
                                }

                                var getPhoneCode = function(phoneNo){
                                    $.post("/student/sendmobilecode.vpage", {mobile : phoneNo}, function(data){
                                        if(data.success){
                                            $17.getSMSVerifyCode($bandingBox.find('.js-bind-now'), data);
                                            $bandingBox.find('.sb-step2').show();
                                            $bandingBox.find('.sb-step1').hide();
                                            $bandingBox.find('.js-info').show();
                                            $bandingBox.find('.mobile-text').html(phoneNo);
                                        }else{
                                            $17.alert(data.info);
                                        }
                                    });
                                    $17.voxLog({
                                        app : "student",
                                        module : "studentRegisterFirstPopup",
                                        op : "LastTwoIs17Reg-getVerCode",
                                        target: phoneNo
                                    });
                                };

                                function downLoadAccount(){
                                    var ifr = document.createElement("a");
                                    ifr.setAttribute("href","/ucenter/fetchaccount.vpage");
                                    ifr.setAttribute("target","_blank");
                                    ifr.style.display = 'none';
                                    document.body.appendChild(ifr);
                                    ifr.click();
                                    setTimeout(function(){
                                        location.href = "https://www.17zuoye.com/student/index.vpage";
                                    }, 200);
                                }
                            }, 100);

                            if(!$17.getCookieWithDefault("stregscs")){
                                $17.setCookieOneDay("stregscs", "60", 60);//设置第一次注册成功学生号
                            }

                            //统计学生注册成功
                            if(studentForm.mobileGray == "showMobileReg2C"){
                                $17.voxLog({
                                    app : "student",
                                    module : "studentRegisterFirstPopup",
                                    op : "showMobileReg2C-success"
                                });
                            }else{
                                $17.voxLog({
                                    app : "student",
                                    module : "studentRegisterFirstPopup",
                                    op : "hideMobileReg-success"
                                });
                            }
                        } else {
                            var attrs = data.attributes;
                            if(attrs){
                                $.each(attrs, function (key, value) {
                                    var el = $('#' + key);

                                    if(key == "dirty"){
                                        $17.alert("班级人数已到达上限.");
                                        $17.voxLog({
                                            app : "student",
                                            module : "studentRegisterFirstPopup",
                                            op : "fullOfPeople"
                                        }, "student");
                                    }else{
                                        if (el.length > 0) {
                                            el.parent().addClass('err');
                                            el.siblings("span").html("<i></i>" + value);
                                        } else {
                                            if (attrs.none) {
                                                $17.alert(attrs.none);
                                            }else{
                                                $17.alert(value);
                                            }
                                        }
                                    }
                                });
                            }else{
                                if(data.clazzId){
                                    $17.alert(data.clazzId);
                                }else if(data.userId){
                                    alertInfo(regBox.find("input[name='username']"), template("T:已注册学号" , {userName : dataJson.realname, userId:data.userId}) );
                                    $17.voxLog({
                                        userId : data.userId,
                                        app : "student",
                                        module : "studentRegisterFirstPopup",
                                        op : "duplicateClass"
                                    }, "student");
                                }
                                else{
                                    $17.alert(data.info);
                                }
                            }
                        }
                        $this.removeClass("dis");
                    }, function (data) {
                        $17.alert("网络请求失败，请稍等重试或者联系客服");
                        $this.removeClass("dis");
                    });
                }
            }
            return false;
        });
    });

    //共用
    $(function(){
        //选择编号
        $(document).on("click", ".click-select-code", function(){
            var $self = $(this);

            $self.addClass("active").siblings().removeClass("active");
            if($self.attr("data-clazzid")){
                studentForm.classCode = $self.attr("data-clazzid");
                studentForm.classCodeName = $self.attr("data-clazzname");
                $(".js-select-clazz-id").val(studentForm.classCode).parent().removeClass("i-error");
                $("#showClazzName").html(studentForm.classCodeName);
            }
            else if($self.attr("data-gender")){
                studentForm.gender = $self.attr("data-gender");
                $(".js-select-gender").val(studentForm.gender).parent().removeClass("i-error");
            }
        });

        //验证input
        $(document).on("focus blur change", "input", function(e){
            var _this = $(this);
            var notice = "";
            var row = _this.parent();
            var _type = _this.attr("name");
            var span = _this.siblings(".i-error-info").find("b");
            var condition = true;
            var errorMessage = "";
            var password = $("input[name='password']:visible");
            var verify_password = $("input[name='verify_password']:visible");
            if(e.type!="blur"){
                switch (_type)
                {
                    case "username":
                        condition = $17.isValidCnName( _this.val());
//                        condition = $17.isCnString( _this.val());
                        errorMessage = "请输入您的真实姓名,须为中文";

                        if(_this.val().length > 6){
                            errorMessage = "请输入1-6位以内的中文名字";
                            condition = false;
                        }

                        if(_this.data("role") == "teacher"){
                            notice = "请输入真实姓名，以便学生找到您";
                        }else{
                            notice = "请输入真实姓名";
                        }
                        break;
                    case "password":
                        if(_this.val().length > 16){
                            errorMessage = "密码不可超过16位";
                            condition = false;
                        }else{
                            if( verify_password.val() != ""){
                                if(_this.val() == verify_password.val()){
                                    verify_password.parent().removeClass("i-error");
                                }else{
                                    verify_password.parent().addClass("i-error");
                                    verify_password.siblings('.i-error-info').find("b").html("密码填写不一致，请重新填写");
                                }
                            }
                        }
                        notice = "请输入1—16位任意字符（字母区分大小写）";
                        break;
                    case "verify_password":
                        condition = (password.val() == _this.val());
                        if( password.val() != "" && _this.val().length < 17){
                            if(condition == true){
                                verify_password.parent().removeClass("i-error");
                            }
                        }

                        errorMessage = "密码填写不一致，请重新填写";
                        notice = "请再次输入密码";
                        break;
                    case "mobile":
                        condition = $17.isMobile(_this.val());
                        errorMessage = "请填写正确的手机号码";
                        notice = "请输入手机号，验证通过后可用于登录、找回密码";
                        break;
                    case "email":
                        condition = $17.isEmail(_this.val());
                        errorMessage = "请填写正确格式的邮箱";
                        notice = "请输入常用邮箱，验证通过后可用于登录和找回密码";
                        break;
                    case "clazzId":
                        var clazzId = _this.getClassId();
                        condition = ((clazzId.length >= 5 && _this.val().toUpperCase().indexOf("C") == 0) || (clazzId.length >= 5 && $17.isNumber(clazzId)));
                        errorMessage = "老师号码无效";
                        notice = "请向您的任课老师询问班级编号";
                        break;
                    case "invite_info":
                        if(_this.data("role") == "student"){
                            notice = "请输入邀请人的一起作业号";
                        }else{
                            notice = "请输入邀请人的一起作业号或手机号";
                        }
                        break;
                    case "ver_code":
                        condition = $17.isNumber(_this.val());
                        errorMessage = "请输入正确验证码";
                        notice = "";
                        break;
                    default:
                        break;
                }
            }
            if(e.type == "focus"){
                if(!row.hasClass("i-error") && _this.val()==""){span.html(notice)}
            }else if(e.type == "blur"){
                if(!row.hasClass("i-error") && _this.val()==""){
                    span.html("<i></i>");
                }
            }else if(e.type == "change"){
                if(!$17.isBlank(_this.val())){
                    if(!condition){
                        row.addClass("i-error");
                        span.html("<i></i>"+errorMessage);
                        row.removeClass("i-info-mini");
                    }else{
                        row.removeClass("i-error");
                        errorMessage = "";
                        span.html("<i></i>"+errorMessage);
                        row.removeClass("i-info-mini");
                        //验证是否是敏感词汇
                        if(_type=="username"){
                            var userName = _this.val();
                            $.post("/signup/filtersensitiveusername.vpage",{userName:userName},function (data) {
                                if(data.success){
                                }else{
                                    row.addClass("i-error");
                                    errorMessage="输入的姓名信息不合适哦，请重新输入<br/>如有疑问，可<a href='http://www.17zuoye.com/redirector/onlinecs_new.vpage?type=teacher&question_type=question_account_ps&origin=PC-注册' target='_blank' style='color:white;text-decoration:underline'>点击联系客服</a>";
                                    span.html("<i></i>"+errorMessage);
                                    row.removeClass("i-info-mini");
                                }
                            });
                        }
                    }
                }else{
                    if(_this.hasClass("require")){
                        errorMessage = _this.data("label") + '不可为空';
                        row.addClass("i-error");
                        span.html(errorMessage);
                    }else{
                        row.removeClass("i-error");
                        span.html("");
                    }
                    row.removeClass("i-info-mini");
                }
            }
        });

        $(document).on('click', '.JS-gotoLoginPage', function(){
            $("#register_template").hide();
            $.prompt.close();

            $(".JS-indexPageBox").show();
            $(".JS-login-main").trigger('click');
        });
    });

    function validate(typeBox){
        $(typeBox).find(".require").each(function(){
            if($17.isBlank($(this).val())){
                $(this).parent().addClass('i-error');
                var errorMessage = "";
                if($(this).data().label == "性别"){
                    errorMessage = "未选择性别哦";
                }else{
                    errorMessage = $(this).data("label") + '不可为空';
                }
                $(this).siblings('.i-error-info').find("b").html(errorMessage);
            }else{
                if($(this).parent().hasClass("i-info-mini")){
                    $(this).parent().removeClass('i-info-mini');
                }
            }
        });

        return ($(typeBox).find(".i-error").size() < 1) ? true : false;
    }

    function alertInfo(id, val){
        $(id).parent().addClass('i-error');
        $(id).siblings('.i-error-info').find("b").html(val);
    }
</script>

<script type="text/html" id="T:选择班级列表">
    <div class="main-title">请选择你所在的班级 : </div>
    <div style="font-size: 20px; color: #ff7b0a; text-align: center; padding-top: 10px; line-height: 120%; white-space: nowrap; width: 100%; overflow: hidden; text-overflow: ellipsis; height: 38px;" id="showClazzName"></div>
    <div class="main-class clearfix">
        <%if(clazzList.length > 0){%>
        <%for(var i = 0; i < clazzList.length; i++){%>
        <span class="click-select-code" data-type="clazzList" data-clazzid="<%=clazzList[i].clazzId%>" data-clazzname="<%=clazzList[i].clazzName%>" title="<%=clazzList[i].clazzName%>"><%=clazzList[i].clazzName%></span>
        <%}%>
        <%}else{%>
        此老师还没有创建班级！
        <%}%>

        <div class="main-title" style="clear:both; padding:15px 0 10px;">请选择性别 : </div>
        <div>
            <span class="click-select-code" data-gender="M">男生</span>
            <span class="click-select-code" data-gender="F">女生</span>
        </div>
    </div>
</script>

<script type="text/html" id="T:学生注册完成">
    <div class="hd hd-success" style="font-size: 22px;">注册成功！推荐绑定家长手机号</div>
    <div class="main-box student-banding-box-2">
        <div class="main-inner pr-layer-prom">
            <div class="text" style="padding:20px 0 0; font-size: 14px;">
                <p style="text-align: left;line-height:150%;">你的学号是：<span><%=studentId%></span></p>
                <p style="text-align: left;line-height:150%;">建议绑定家长手机，便于找回密码、避免账号丢失哦</p>
            </div>
            <ul class="main-list">
                <li>
                    <label>请输入家长手机号</label>
                    <input type="text" value="" maxlength="11" name="mobile" class="require" data-label="手机号"/>
                    <span class="info-text"><a href="javascript:void(0);" class="code-btn js-bind-now"><span>免费获取验证码</span></a></span>
                    <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                    <div class="reg-arrowInfo">
                        <span class="sar">◆<span class="ir">◆</span></span>
                        <p>1.不绑定手机，你兑换的奖品将不能寄送；</p>
                        <p>2.不绑定手机，密码丢失将不能通过手机号找回！</p>
                    </div>
                </li>
                <li>
                    <label>请输入手机收到的短信验证码</label>
                    <input type="text" maxlength="6" class="require" name="ver_code" data-label="验证码"/>
                    <span class="i-error-info"><b></b><span class="ar">◆</span></span>
                </li>
            </ul>
            <div class="submit"><a href="javascript:void(0);" class="js-band-confirm-2" data-type="student">确定</a></div>
            <p align="center" style="line-height:32px;"><a href="javascript:void(0)" class="js-student-downloadUser-popup" style="color:#999">暂不绑定</a></p>
        </div>
    </div>
</script>

<script type="text/html" id="T:学生注册完成2">
    <div class="hd hd-success">恭喜，注册成功!</div>
    <div class="main-box">
        <div class="main-inner pr-layer-prom" style="border-radius:8px;padding:0 0 15px;">
            <div class="text" style="padding:20px 0 0; text-align: center;">
                <p style="line-height:32px;">你的学号是：<span><%=studentId%></span></p>
                <p style="line-height:32px;">下次使用学号+密码登录即可完成作业</p>
            </div>
            <div class="submit"><a href="javascript:void(0);" class="js-student-downloadUser" data-type="student">确定</a></div>
        </div>
    </div>
</script>

<script type="text/html" id="T:下载账号信息">
    <p style="text-align:center;font-size:16px;color:#4b4b50;">推荐把账号信息保存到电脑上，避免账号丢失哦</p>
</script>

<script type="text/html" id="T:已用过一起作业提示">
    <div class="t-propClazz-box" data-type="welcome">
        <p class="title" style="text-align: center; padding: 20px 0;">欢迎加入一起作业，你是？</p>
        <div class="pp-btn">
            <a class="reg-btn reg-btn-green v-clickHasBeenUser" href="javascript:void (0);">已用过一起作业</a>
            <a class="reg-btn v-clickNewRegisterUser" href="javascript:void (0);">新用户</a>
        </div>
    </div>
    <div class="t-propClazz-box" style="display: none;" data-type="login">
        <p class="title" style="text-align: center; font-size: 18px;">原来的账号就可以换班级、换老师，或新增一个老师</p>
        <div class="pp-help-back"><!--help back--></div>
        <div class="pp-btn">
            <a class="reg-btn JS-gotoLoginPage" href="javascript:;">去登录</a>
            <a href="/ucenter/resetnavigation.vpage?ref=signup" style="color: #39f; text-decoration: underline; display: inline-block; vertical-align: middle;">忘记原来账号了？</a>
        </div>
    </div>

</script>

<script type="text/html" id="T:已注册学号">
    <div class="reg-arrowInfo" style="background: #fff; z-index: 4; right: -296px; top: -3px;">
        <span class="sar"></span>
        <p class="txtRed"><%=userName%> 已注册学号，<%=userId%>，请直接登录! <a href="/login.vpage?userid=<%=userId%>" class="link-btn01">去登录</a></p>
        <p class="txtGrey">不是你的学号？<a href="javascript:void(0)" class="link" onclick="window.open('https://www.17zuoye.com/redirector/onlinecs_new.vpage?type=student&question_type=question_account_ps&origin=PC-注册','','width=856,height=519')">联系客服</a></p>
    </div>
</script>
<div id="jisuan-template" class="jisuan-template" style="display: none">
    <div class="jisuan-box">
        <p class="p1">尊敬的老师：</p>
        <p class="p2">目前，极算已加入到“一起教育科技"大家庭。未来将携手旗下智能教育平台“一起作业”继续为您提供更优质的教育内容和产品体验，为更好的为您提供产品服务，我们将会更新“极算”（神算子）的相关功能页面，在您的使用过程中，任何疑问，欢迎致电官方客服400-160-171，您的每一次反馈都将是我们前行的基石，期待与您相遇每一天。</p>
        <p class="p3">让科技和教育一起，实现学习美好体验！</p>
        <p class="p4">2018年5月</p>
        <div class="start-use" id="start-use">开始体验</div>
    </div>
</div>

<script>
    // 从极算官网-老师端跳转过来的显示弹窗提示（#69626）
    function frontofAlertDeadLine () {
        var deadLineTime = new Date('10/30/2018 23:59:59').getTime();
        var nowTime = new Date().getTime();
        if (nowTime < deadLineTime) return true;
        else return false;
    }
    var fromShensz = 'false';
    if (fromShensz ==='true' && !$17.getCookieWithDefault("is_show_ssz_teacher_login_tip")  && frontofAlertDeadLine()) {
        $('#jisuan-template').show(); // 展示神算及弹窗
    }

    $(document).on('click', '#start-use', function (){
        $('#jisuan-template').hide();
        $17.setCookieOneDay("is_show_ssz_teacher_login_tip", "1", 365);
    });
</script>
    <div class="zy-homeFooter">
        <div class="innerBox">
            <div class="left">
                <div class="text">
                    <!--<p>Copyright &copy; 2011-2018 17ZUOYE Corporation. All Rights Reserved.</p>-->
<!--<p>ICP证沪B2-20150026 沪ICP备13031855号-2 <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502032354" target="_blank" style="color:#999"><img src="__TMPL__/index/picture/icp-beian.png" style="display: inline-block;vertical-align: middle;"/>京公网安备 11010502032354号</a></p>-->
<!--<p>公司地址：上海市嘉定区陈翔路88号6幢A区1131室</p>-->

                </div>
            </div>
            <div class="right">
                <div class="cell">
                    <a href="javascript:;" class="tag" style="cursor: default;">使用须知</a>
                    <a href="https://www.17zuoye.com/help/serviceagreement.vpage?agreement=0" target="_blank"><i class="zy-icon icon-agree1"></i><span>用户协议</span></a>
                    <a href="https://www.17zuoye.com/help/privacyprotection.vpage" target="_blank"><i class="zy-icon icon-agree2"></i><span>隐私保护</span></a>
                </div>
                <div class="cell" style="width:120px;">
                    <a href="javascript:;" class="tag" style="cursor: default;">联系我们</a>
                    <a href="https://www.17zuoye.com/help/kf/index.vpage" target="_blank"><i class="zy-icon icon-bzfk"></i><span>帮助反馈</span></a>
                    <a href="javascript:;"><i class="zy-icon icon-tel"></i><span>400-160-1717</span></a>
                </div>
                <div class="cell">
                    <a href="javascript:;" class="tag" style="cursor: default;">关注我们</a>
                    <a href="http://weibo.com/yiqizuoye" target="_blank"><i class="zy-icon icon-xlwb"></i><span>新浪微博</span></a>
                    <a href="javascript:;">
                        <i class="zy-icon icon-gfwx"></i><span>官方微信</span>
                        <div class="codeImg"></div>
                    </a>
                </div>

            </div>
        </div>
    </div>

<script src='__TMPL__/index/js/loginv5.min-v20180709225151.js' type='text/javascript' charset='utf-8'></script></body>
</html>
<!--<html><head><script type="text/javascript" src="js/main.js"></script><style></style></head><body></body></html>-->
